<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Homepage</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="flash-message {{ category }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    {% endwith %}
   <a href="/admin" class="admin-link">Admin</a>
    <div class="homepage">
        <!-- Main Content Area -->
        <div class="main-content">
            <h1 class="main-title">Latest Posts</h1>
            
            <!-- Blog Posts Grid -->
            <div class="posts-grid">
                {% for info in data %}
                <div class="post-card">
                    <img src="{{info['img']}}" alt="{{info['title']}}" class="post-image">
                    <div class="post-info">
                        {% if info['title'] | length > 100 %}
                        <h2 class="post-title"><a href="{{ url_for('post', id=info['id']) }}">{{ info['title'][:100] }}</a></h2>
                        {% else%}
                        <h2 class="post-title"><a href="{{ url_for('post', id=info['id']) }}">{{ info['title'] }}</a></h2>
                        {%endif%}

                        <p class="post-description">{{ info['postbody'][:150] }}...</p>
                        <a href="{{ url_for('post', id=info['id']) }}" class="read-more-btn">Read More</a>
                        <h2 class="post-title"><a href="{{ url_for('edit_post', id=info['id']) }}">edit</a></h2>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

       <!-- Sidebar for Latest Posts with Images -->
<div class="sidebar">
    <h2 class="sidebar-title">Recent Posts</h2>
    <ul class="sidebar-posts">
        {% for info in data[:8] %}
        <li>
            <a href="{{ url_for('post', id=info['id']) }}">
                <img src="{{info['img']}}" alt="{{info['title']}}" class="sidebar-thumbnail">
                {{info['title'][:30]}}
            </a>
        </li>
        {% endfor %}
        <!-- Add more posts dynamically here -->
    </ul>
</div>

    </div>

    <script src="js/script.js"></script>
</body>
</html>
